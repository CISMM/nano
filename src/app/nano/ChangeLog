2001-03-02  Adam Seeger  <seeger@cs.unc.edu>

	* microscape.c (main): changed registration to always go through vrpn

2001-03-02  Aron Helser  <helser@cs.unc.edu>

	* microscape.c: Remove obsolete createForwarders call.

2001-02-24  Tom Hudson  <hudson@cs.unc.edu>

	* CollaborationManager.C (getPeer) : handle new vrpn syntax.
	(getPeerReplay) : same.
	(getServer) : same.
	* microscape.c (handle_openStreamFilename_change) : same.
	(handle_openSPMDeviceName_change) : same.
	(main) : same.

	* microscape.c (sharedGraphicsServer) : add VERBOSE output,
	turn off UberGraphics in multithreaded graphics implementation.
	(spawnSharedGraphics) : add VERBOSE output.
	(createGraphics) : same.
	(main) : don't start up Registration code in shared memory.

2001-02-09  Jason Clark  <jclark@cs.unc.edu>

	* microscopeHandlers.C: Changed handle_z_scale_change to call
	causeGridRebuild instead of causeGridRedraw

	* microscape.c: Added Tcl variables and callback functions to
	support	visualization interface

2001-02-01  Aron Helser  <helser@cs.unc.edu>

	* minit.c (handle_phantom_error): On any phantom error, release
	the phantom button.  

2001-01-19  Jason Clark  <jclark@cs.unc.edu>

	* microscape.c (handle_analyze_shape): Fixed analyze shape code to
	work by callback through TCL variable, the way I should have done
	it in the first place.

2001-01-14  Jason Clark  <jclark@cs.unc.edu>

	* microscape.c: Modified to use new Shape Analysis code and to
	use new "Visualization" code.

	* Makefile (USES_LIBS): Added new lib nmAnalyze

2001-01-14  Tom Hudson  <hudson@cs.unc.edu>

        * microscape.c (MicroscapeInitializationState) : add members
        logPhantom, phantomLogPath
        (MicroscapeInitializationState constructor) : initialize new members
        (ParseArgs) : read new command line argument -logphantom
        (Usage) : document -logphantom, fix a few line breaks
        (main) : handle logging Phantom

2000-01-08  Tom Hudson  <hudson@cs.unc.edu>

	* CollaborationManager.h:  add autodoc comments

	* microscape.c:  revise comments

2000-12-28  Aron Helser  <helser@cs.unc.edu>

	* globals.[Ch]: removed tcl_offsets for knobs, mode_change, and
	user_mode.  

	* interaction.[ch] (dispatch_event): Removed user parameter - always
	user 0. 
	(all): Changed to single head/hand tracker.
	Changed to user_0_mode. 

	* microscape.c (handleCharacterCommand): Obsolete, removed all
	commands accessible somewhere else.
	(handle_tcl_quit): new
	(handle_clear_markers_change): new 
	(all): Changed to single head/hand tracker.
	Changed to user_0_mode. 

	* microscopeHandlers.C (handle_z_dataset_change): removed
	handleCharacterCommand call, set user_0_mode instead
	(handle_z_scale_change): same

	* minit.c: Changed to user_0_mode, changed to single head/hand
	tracker. 

	* tcl_tk.[hc] (init_Tk_variables): Simplified user_mode to single
	tclvar_int, removed tcl knob handling. 
	(set_Tk_command_handler): removed.

2000-12-20  Aron Helser  <helser@cs.unc.edu>

	* all: 3rdtech merge into main trunk. 

2000-12-15  Adam Seeger  <seeger@cs.unc.edu>

	* microscape.c (createNewMicroscope) : 
        added call to TipConv->changeDataset

2000-12-14  Tom Hudson  <hudson@cs.unc.edu>

	* microscape.c (shutdown_connections) : delete
        microscopeRedundancyController before deleting microscope_connection
	(handle_openStreamFilename_change) : same
	(handle_openSPMDeviceName_change) : same
	(openDefaultMicroscope) : same

2000-12-05  Tom Hudson  <hudson@cs.unc.edu>

	* interaction.c : add new Tclvars for network adaptation
	(handle_useRedundant_change) : new function
	(handle_numRedundant_change) : same
	(handle_redundantInterval_change) : same
	(handle_useMonitor_change) : same
	(handle_monitorThreshold_change) : same
	(handle_monitorDecay_change) : same
	* microscape.c : add new Tclvars for network statistics
	(handle_recordAdaptations_change) : new function
	(handle_msTimestampsName_change) : same

2000-12-05  Kwan Torrich Skinner <skinner@cs.unc.edu>

	* interaction.c (handle_commit_change) : new code to handle optimize now mode.
	(handle_commit_cancel) : same.
	(dispatch_event) : same.
	(doLine) : same.
	(interaction) : new parameter to setUserMode().
	* interaction.h : external reference to position_sphere(float, float, float)
	
2000-12-05  Russ Taylor  <taylorr@cs.unc.edu>

	* microscape.c (register_vrpn_phantom_callbacks) : Moved the
	Phantom to the correct location when using the new Workbench (head-
	tracked mono or stereo flat-screen CRT).

2000-11-30  Russ Taylor  <taylorr@cs.unc.edu>

	* microscape.c (find_center_xforms) : Modified the center code for
	the workbench case, so that it fills the whole screen and is tilted
	45 degrees away -- since we are now using horizontal flat-screen CRT.

2000-11-29  Adam Seeger  <seeger@cs.unc.edu>

	* microscape.c (Usage) : add documentation of -daligner argument
        (main) : add printouts of what colorplane, colormap and heightplane
	were getting set to because there seems to be some problem with
	them getting set to what the user says they should be

2000-11-29  Tom Hudson  <hudson@cs.unc.edu>

	* minit.h : new file
	* interaction.c : #include minit.h
        (doSelect) : add test of microscope->haveMutex()
	* interaction.h : add #defines for knob box
	* microscape.c : move around #includes, #include minit.h
	(createNewMicroscope) : add call of microscope->requestMutex()
	* microscape.h : remove redundant, obsolete, or mis-placed items
	* microscapeHandlers.C : #include minit.h

	* tcl_tk.c : remove dead code

2000-11-20  Tom Hudson  <hudson@cs.unc.edu>

	* microscape.c : add vrpn_bool g_syncPending to reduce problems
	with rapidly changing between private and shared states

2000-11-20  Kwan Skinner  <skinner@cs.unc.edu>

	* microscape.c (teardownSynchronization) : new function.
	(createNewMicroscope) : do the right thing when a new streamfile is
	opened in collaboration.

2000-11-5  Tom Hudson  <hudson@cs.unc.edu>

	* mf.h : move file to attic
	* renderer.C : same
	* butt_mode.c : remove #include of mf.h
	* interaction.c : same
	* normal.c : same, remove call of #defines (DOCUMENT) from mf.h

2000-11-1  Tom Hudson  <hudson@cs.unc.edu>

	* microscape.c : remove includes of stm_file.h, stm_cmd.h,
        references to USE_VRPN_MICROSCOPE
        * microscopeHandlers.h : same
        * minit.c : same
        * normal.c : same
        * x_util.c : same

2000-10-26  Adam Seeger  <seeger@cs.unc.edu>

	* microscape.c : 
        disables microscopeRedundancyController by not creating it
	(just commented out the call to new so this pointer is always NULL now)
	this is just temporary for the release

2000-10-24  Adam Seeger  <seeger@cs.unc.edu>

	* error_display.C : merge with changes in thirdtech_branch

2000-10-23  Adam Seeger  <seeger@cs.unc.edu>

	* interaction.c (drawLine) : fixes to re-enable updatableQueue properly
	it still may not be disabled in all places that it should but it
	is better that it be overly enabled than overly disabled

2000-10-16  Tom Hudson  <hudson@cs.unc.edu>

	* interaction.c (updateMicroscopeRTTEstimate) : new function

2000-10-16  Tom Hudson  <hudson@cs.unc.edu>

	* microscape.c :  add colorplane, colormap, heightplane to istate
	(ParseArgs) : handle new arguments
	(Usage) : document new arguments
	(main) : use new arguments

2000-10-12  Adam Seeger  <seeger@cs.unc.edu>

        * microscape.c (handle_openStreamFilename_change) : The log file was
	not getting reset if you reopened the same one. I thought this
	problem had been fixed before by making vrpn_get_connection_by_name 
        reset the log file if we tell it that we want to open a log file
	which is already open but perhaps this got changed back. Now we
	explicitly call reset() on the log file - this was discovered 
	because we weren't getting the grid size message and then we got
	a message with data in it that didn't match the grid size

2000-10-09  Adam Seeger  <seeger@cs.unc.edu>

	* microscape.c (main) : added copy of file name out of the
        istate.afm.deviceName into the istate.afm.inputStreamName when
        the deviceName refers to a file - this was causing a bunch of stuff
	to be overwritten by a strcpy of the uninitialized 
        istate.afm.inputStreamName into a variable in AFMState

2000-10-05  Tom Hudson  <hudson@cs.unc.edu>

	* CollaborationManager.C (setPeerName) :  add diagnostics
	* collaboration.C :  delete entire file contents and replace with
        comment about intended unfufilled purpose of file
	* microscopeHandlers.C (cause_grid_redraw) :  delete dead code

2000-10-02  Kwan Torrich Skinner  <skinner@cs.unc.edu>
	
	* CollaborationManager.C (CollaborationManager::initialize) :
	Added two more collabVerbose statements for handServer binding.
	* microscape.c (createNewMicroscope) : changed 
	handCoordinateServer00 to handCoordinateServer0.

2000-10-02  Jason Clark  <jclark@cs.unc.edu>

	* minit.c: Added include <nmb_Debug.h> to get collabVerbose
	function.

2000-10-02  Tom Hudson  <hudson@cs.unc.edu>

	* microscape.c : add timeGraphics to initialization state
	(ParseArgs) : add handler for timeGraphics
        (Usage) : add documentation for timeGraphics
        (createGraphics) : check timeGraphics before creating a
        nmg_Graphics_Timer object, pass timeGraphics to RenderClient
        objects

2000-10-01  Jason Clark  <jclark@cs.unc.edu>

	* microscape.c: Added in Cloud Texturer server as an option

	* normal.c (Compute_Norm): New compute norm function

	* normal.h (Compute_Norm): Added new Compute_Norm function that
	takes floats instead of ints, so you can get the normal at an
	interpolated point

2000-09-28  Tom Hudson  <hudson@cs.unc.edu>

	* microscape.c (createNewMicroscope) : call doCallbacks() on measure
        lines after they're initialized to propagate those values into Tcl


2000-09-27  Tom Hudson  <hudson@cs.unc.edu>

	* microscape.c (shutdown_connections) : clean up after data_min
	and data_max to avoid segfault

2000-09-27  Tom Hudson  <hudson@cs.unc.edu>

	* microscape.c (setupSynchronization) : add long comment about
        the bugs we've had recently
	* tcl_tk.c (handle_surface_change) : remove dead code
	(init_Tk_control_panels) : same

2000-09-27  Adam Seeger  <seeger@cs.unc.edu>

	* microscape.c (main) : moved call to init_Tk_control_panels to an
	earlier point so that interpreter exists when some Tclvars are
	initialized in nmb_Dataset - this didn't fix the bug I was tracking
	down but it seems to make Tclvar_list_of_strings::initializeTcl 
	happier (I don't see how else it could get the callback set up for
	changes from tcl although we don't expect such a change for most 
	if not all of these types of variables) and doesn't seem to break 
 	anything
	* tcl_tk.hc (init_Tk_control_panels) : split this into two functions
	called init_Tk_control_panels and init_Tk_variables - the second one
	probably contains some obsolete variables (this change was needed
	to allow the interpreter to be created earlier in the startup
	sequence)

2000-09-26  Tom Hudson  <hudson@cs.unc.edu>

	* CollaborationManager.C : include nmb_Debug.h
        (getPeer) : replace fprintf() with collabVerbose()
        (getPeerReplay) : same
        (getServer) : same
        (setLogging) : same
        (setPeerName) : same
        (sendOurTimer) : same
        (respondToPeerTimer) : same
        (handle_peerTimer) : same
        (handle_timerResponse) : same
	* microscape.c : handle -cverbosity command line argument

	* interaction.c : add fprintf() during feelAhead
	* microscopeHandlers.C : same


2000-09-21  Tom Hudson  <hudson@cs.unc.edu>

        * microscape.c (local_time_sync) : must return a value

2000-09-21  Tom Hudson  <hudson@cs.unc.edu>

        * tcl_tk.c (init_Tk_control_panels) : take collaborationTimer as
        argument and pass to Tclnet_init()

        * microscape.c (local_time_sync) : new function
        (handle_synchronize_timed_change) : call local_time_sync() (sometimes)
        (handle_copy_to_private) : call local_time_sync()
        (createNewMicroscope) : call linkMicroscopeToInterface()
        (main) : same;  handle & display timings

        * CollaborationManager.C : d_timer, d_myId_svr,
        d_myId_rem, d_timerSN_type, d_timerSNreply_type : new data members
        (mainloop) : call sendOurTimer() and respondToPeerTimer()
        (initialize) : set up VRPN ids, handlers
        (setPeerName) : same
        (setTimer) : new function
        (sendOurTimer) : same
        (respondToPeerTimer) : same
        (handle_peerTimer) : same
        (handle_timerResponse) : same

        * interaction.c : clean up old code & comments
        (FDOnOffMonitor) : new class
        (setupHaptics) : use objects on haptic_manager instead of
        local static objects;  handle feelahead.
        (doLine) : use FDOnOffMonitor
        (doFeelLive) : same
        (doFeelFromGrid) : same;  call setupHaptics()
        (setupSweepIcon) : new function
        (linkMicroscopeToInterface) : same
        (initializeInteraction) : create objects on haptic_manager

2000-09-14  Kwan Torrich Skinner <skinner@cs.unc.edu>

	* nM_coord_change.C (mainloop) : made a call to server_mainloop, killed
	a compiler warning.

2000-09-14  Adam Seeger  <seeger@cs.unc.edu>

	* microscape.c : textureConversionMapName initialized to "none"
	instead of "CUSTOM"

2000-09-13  Kwan Torrich Skinner  <skinner@cs.unc.edu>
	* microscape.c (initialize_environment) : replaced instances of
	ccs0 with handCoordinateServer0 and instances of cmode0 with
	userModeServer0.
	* CollaborationManager.C (setPeerName) : same.

2000-09-12  Kwan Torrich Skinner  <skinner@cs.unc.edu>
	* microscape.c (main): moved gethostname call and corresponding
	neighboring code to be executed before the dataset is initialized to
	ensure the correct hostname is assigned to d_hostname in nmb_Dataset.

2000-09-08  Adam Seeger  <seeger@cs.unc.edu>

	* microscape.c (handle_openStreamFilename_change): took out
	delete of microscope connection 
	(the problem was in not unregistering vrpn handlers with
	references to the old microscope)

2000-09-07  Adam Seeger  <seeger@cs.unc.edu>
        
        * microscape.c (handle_openStreamFilename_change) : added delete
	of microscope connection before getting a new one - this somehow
	fixes a crash on the pc when opening the same file more than once
        * microscopeHandlers.C (handle_z_scale_change): this now updates
        nmb_Decoration so it can scale the modify markers to match the plane
        * interaction.c (handle_commit_cancel): allows cancelling of 
        planned line modification in USER_GRAB_MODE, USER_SCALE_UP_MODE,
        USER_SCALE_DOWN_MODE, USER_LIGHT_MODE, and USER_MEASURE_MODE since
        I think it would make things more convenient and I don't see any harm
        in it (an alternative could be to disable the cancel button if
        you aren't in touch before modify or select mode)

2000-09-04  Adam Seeger  <seeger@cs.unc.edu>

	* microscopeHandlers.C (handle_doRelaxComp_change): Changed to make
	this consistent with how things are done in nmm_MicroscopeRemote.C

2000-09-01  Adam Seeger  <seeger@cs.unc.edu>

	* microscape.c (main) : added check of 
	microscope_connection->doing_okay() to fix problem of trying to open
	an invalid file on the command line

2000-08-31  Kwan Torrich Skinner  <skinner@cs.unc.edu>

        * all : merged merge-2000-summer-thirdtech code with trunk.

2000-08-30  Adam Seeger  <seeger@cs.unc.edu>

        * Makefile: took out RhinoIO for VC compile
        * microscape.c (MicroscapeInitializationState constructor): adds
        initialization for NIC_IP and logTimestamp
        * microscape.[ch], minit.c: fixed confusion over name of 
        function get_Plane_Extents changing to get_Plane_Centers

2000-08-27  Kwan Torrich Skinner  <skinner@cs.unc.edu>

        * microscape.c : converted procProgNames from nmb_ListOfStrings to 
	Tclvar_list_of_strings.

2000-08-17  Adam Seeger  <seeger@cs.unc.edu>

        * microscape.c (handle_texture_dataset_change): sets slider limits
		a little differently (using minNonZeroValue instead of minValue)

2000-08-16  Tom Hudson  <hudson@cs.unc.edu>

        * microscape.c (main):  added call to
        microscope->EnableUpdatableQueue(VRPN_TRUE).
        * interaction.c (drawLine):  new function.  Added calls to
        microscope->EnableUpdatableQueue().
        (drawLineStep):  same.
        (handle_commit_change):  factored out large case and loop into
        drawLine() and drawLineStep().

2000-08-15  Jeffrey Juliano  <juliano@cs.unc.edu>

	* Makefile.additional-targets: New file.
	* Makefile: Post-include Makefile.additional-targets.

2000-08-14  Jeffrey Juliano  <juliano@cs.unc.edu>

	* microscape.c (main): Add call to ios::sync_with_stdio().
	* microscape.c (setupCallbacks): Pass correct dataset ptr.

2000-08-11  Kwan Torrich Skinner  <skinner@cs.unc.edu>

	* all: Merge thirdtech_branch code to trunk.

2000-08-10  Jeffrey Juliano  <juliano@cs.unc.edu>

	* ChangeLog: New File.
	* microscape.c (find_center_xforms): Clean up.

2000-08-09  Jeffrey Juliano  <juliano@cs.unc.edu>

	* microscape.c (Usage): Change linkage to internal (static).
	(handleTermInput): Same.
	(handleMouseEvents): Same.
	(get_Plane_Centers): Same.
	(find_center_xforms): Same.
	(vec_cmp): Same.
	(guessAdhesionNames): Same.

2000-08-06  Jeffrey Juliano  <juliano@cs.unc.edu>

	* microscape.c: tell emacs to use c++-mode

